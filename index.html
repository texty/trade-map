<!DOCTYPE html>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Імпорт-експорт</title>

<!-- Links -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i,700,700i|Roboto+Slab:300,400,700|Roboto:400,400i,500,500i,700,700i,900&display=swap&subset=cyrillic" rel="stylesheet">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<link rel="stylesheet" href="css/styles.css">


<body>

<header>
    <div>
    <h1>Вітчизняний імпорт-експорт 2001-2018</h1>
    <h3>Основний меседж - ми все ще дофіга торгуємо з Росією, але вже помітно менше</h3>
    </div>

</header>

<section class="line-chart-container">
    <div id="ru-eu" class="buttons">
        <p id="show-ru">Росія</p>
        <p id="show-eu">Європейський Союз</p>
        <p style="font-size:14px; color: grey; text-align: left; font-style: italic ">Під країнами ЄС за кожен рік рахувались ті країни, які входили до ЄС станом на поточний рік. Зростання торгівлі до ЄС на графіках частково повʼязано з цим, адже кількість країн - членів ЄС суттєво збільшилась протягом останніх 20 років </p>
    </div>

    <div>
        <h2 id="selected-country"> Торгівля з Росією, 2001-2018</h2>

        <div id="general-chart">

        </div>

        <h2> Топ-5 продуктів, 2001-2018</h2>
        <div class="buttons">
            <p id="show-import" class="switch-button">Імпорт</p>
            <p id="show-export" class="switch-button">Експорт</p>
            <p style="font-size:14px; color: grey;">Наведіть на графік, щоб побачити динаміку без уніфікованої шкали і значення за 2001 та 2018 роки (млн $)</p>
        </div>
        <div id="line-chart"></div>
    </div>
</section>


<div id="tip-chart">

</div>


<!--<section id="playground">-->
    <!--<div id="data-vis">-->
        <!--<ul id="my-list"></ul>-->

        <!--<div id="graphics">-->
            <!--<p id="linechart-title"></p>-->
            <!--<div id="line-chart2"></div>-->
            <!--<p style="font-size: 14px; text-align: center; margin:20px auto;">Графік вище показує динамікау експорту та імпорту з 2001 року.-->
                <!--<br><b>Сіра плашка під роками інтерактивна - її можна рухати і тягути праворуч-ліворуч.</b> <br>Встановіть потрібний період і подивіться, з якими країнами <br>ми торгували в обрані роки.-->
            <!--</p>-->

            <!--<p id="sankey-annotation"> У <span id="selected-years"></span> ми торгували з такими країнами:</p>-->
            <!--<div id="sankey"></div>-->

        <!--</div>-->
    <!--</div>-->
<!--</section>-->


<script type="text/javascript" src="lib/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="lib/d3.v4.js"></script>
<script src="lib/d3-sankey.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<!--<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>-->
<script src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js"></script>
<script src="lib/d3.tip.v0.6.3.js"></script>
<script src="lib/share-behavior.js"></script>







<script>
    const exColor = "#c01788";
    const imColor = "rgb(24, 100, 170)";
    var showExport = false;
    var showImport = true;

    var parseYear = d3.timeParse("%Y");
    var bisectDate = d3.bisector(function(d) { return d.year; }).left;


    var chart_data;
    function retrieve_chart_data(cb) {
        if (chart_data) return cb(chart_data);

        return d3.csv("data/newLineChartData.csv", function(err, myData){
            if (err) throw err;

            myData.forEach(function (item) {
                item.code = +item.code;
                item.year = parseYear(item.year);
                item.Exported = +item.Exported  || 0;
                item.Imported = +item.Imported  || 0;
            });

            chart_data = myData;
            if (cb) return cb(myData);
            return;
        })
    }

    /* Показати імпорт */
    $("#show-import").on("click", function(d) {
        showExport = false;
        showImport = true;
        d3.selectAll(".svg-wrapper.Exported").style("display", "none");
        d3.selectAll(".svg-wrapper.Imported").style("display", "block");
        d3.select("#show-import").style("background-color", imColor).style("color", "white");
        d3.select("#show-export").style("background-color", "white").style("color", exColor);
    });

    /* Показати експорт */
    $("#show-export").on("click", function(d) {
        showExport = true;
        showImport = false;
        d3.selectAll(".svg-wrapper.Imported").style("display", "none");
        d3.selectAll(".svg-wrapper.Exported").style("display", "block");
        d3.select("#show-export").style("background-color", exColor).style("color", "white");
        d3.select("#show-import").style("background-color", "white").style("color", imColor);
    });


</script>

<!-- new version-->
<!--<script src="lib/scrollama.min.js"></script>-->
<script type="text/javascript" src="js/newLineChart.js"></script>
<script type="text/javascript" src="js/generalRuEuChart.js"></script>
<!--<script type="text/javascript" src="js/map.js"></script>-->
<!--<script type="text/javascript" src="js/sankey.js"></script>-->
<!--<script type="text/javascript" src="js/linechart.js"></script>-->
<!--<script type="text/javascript" src="js/spark.js"></script>-->
<!--<script type="text/javascript" src="js/script.js"></script>-->



<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18136548-1']);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script>

</body>
